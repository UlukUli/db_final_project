Нормализация и проектирование базы данных для Hotel Bookings

1. Нормализация данных (1НФ -> 2НФ -> 3НФ)

1НФ - Приведение к табличному виду

* Все значения сделаны атомарными.
* Убраны повторяющиеся группы.
* Каждая строка уникальна.

Пример: атрибуты вроде hotel, meal, market segment и т.д. выделены в отдельные поля и приведены к единственным значениям.

2НФ - Удаление частичных зависимостей

В исходных данных были поля, которые логически относятся не к факту бронирования, а к типам сущностей.
Чтобы не хранить одинаковые значения снова и снова, были созданы отдельные таблицы:

* hotels
* meals
* market_segments
* distribution_channels
* deposit_types
* rooms

Теперь каждое значение категории хранится один раз, а в таблицах фактов - только ссылки.

3НФ — Удаление транзитивных зависимостей

* В главной таблице bookings оставлены только данные, относящиеся непосредственно к бронированию.
* Все свойства справочных сущностей вынесены в свои таблицы.
* Ни одно неключевое поле не зависит от другого неключевого поля - только от первичного ключа booking_id.

Результат -структура без дублирования и логических конфликтов.


 2. Создание таблиц и проектирование связей

После нормализации были созданы отдельные справочные таблицы:

*Справочники

* hotels (hotel_id, hotel_type)
* meals (meal_id, meal)
* market_segments (market_segment_id, market_segment)
* distribution_channels (distribution_channel_id, distribution_channel)
* deposit_types (deposit_type_id, deposit_type)
* rooms (room_id, room_code)
* customers (customer_id + характеристики)

Все справочники содержат:

* первичный ключ
* один или несколько атрибутов, описывающих тип сущности

Главная таблица - bookings

Таблица bookings связывает справочники и содержит фактические данные о бронированиях:

Связи:

* hotel_id-> hotels
* customer_id -> customers
* reserved_room_id-> rooms
* assigned_room_id -> rooms
* meal_id -> meals
* market_segment_id-> market_segments
* distribution_channel_id -> distribution_channels
* deposit_type_id-> deposit_types

Кроме ссылок на справочники здесь хранятся:

* даты прибытия
* количество гостей
* длительность проживания
* стоимость (ADR)
* статус брони
* количество изменений, отмен и т.д.



 3. ER-диаграмма (текстовое описание)

Bookings — центральная сущность.
От неё идут связи многие-к-одному (N:1) к справочникам:

* Bookings-> Hotels
* Bookings-> Customers
* Bookings->Rooms (reserved)
* Bookings ->Rooms (assigned)
* Bookings ->Meals
* Bookings-> Market Segments
* Bookings ->Distribution Channels
* Bookings -> Deposit Types

Логика модели:
Сущности сами по себе не связаны друг с другом напрямую — только через bookings.
Получается звездообразная структура (star-schema), где все справочники расходятся лучами от главной таблицы.

